/*!
 * Buttery v1.3.0
 * https://github.com/liquidlight/buttery
 *
 * Copyright 2017 Mike Street & Liquid Light
 */
!function(h){h.fn.buttery=function(s){s=h.extend({parallaxSelector:".parallaxInner",scale:1.5,scaleFraction:5,hasScaleEffect:!1,height:"image",scrollFraction:2,imageSrc:"background"},s);function c(t){return t.object.css("height",t.wrapper.width()/t.options.ratio),t.maxTransform=t.object.innerHeight()*t.options.scale-t.wrapper.innerHeight(),t}function l(t,a){var e=t.scrollTop();a.wrapper.offset().top>t.innerHeight()&&(e=t.scrollTop()+t.innerHeight()-a.wrapper.offset().top);var r=(e/=a.options.scrollFraction)>a.maxTransform?a.maxTransform:e<0?0:e,i=a.options.scale;a.options.hasScaleEffect&&(i=e*(a.options.scaleFraction/1e3)/10+1),a.object.css("transform","translate3d(0, -"+r+"px, 0) scale("+i+")")}var t=h(this);h(window).on("load.buttery",function(){t.each(function(){h(this).length&&function(t){var a=s,e="background"==s.imageSrc?t.css("backgroundImage"):t.find("img").attr("src");if(!e)return;e=e.replace("url(","").replace(")","").replace(/['"]+/g,""),t.addClass("hasButtery").prepend('<div class="'+a.parallaxSelector.replace(".","")+'" />');var r="static"==t.css("position")?"relative":t.css("position");if(t.css({position:r,overflow:"hidden",zIndex:"1"}),t.is("[data-buttery-scale]")&&(a.scale=t.attr("[data-buttery-scale]")),t.is("[data-buttery-scrollFraction]")&&(a.scrollFraction=t.attr("[data-buttery-scrollFraction]")),t.is("[data-buttery-height]")&&(a.height=t.attr("[data-buttery-height]")),t.is("[data-buttery-image]")&&(a.imagePath=t.attr("[data-buttery-image]")),"image"==a.height){var i=new Image;i.src=e,a.ratio=i.width/i.height,a.height=t.width()/a.ratio}else a.ratio=t.width()/a.height;"image"==s.imageSrc&&t.find("img").css({visibility:"hidden"});var o=t.find(a.parallaxSelector);o.css({transform:"translate3d(0, 0, 0) scale("+(a.scale<=0?.1:a.scale)+")",willChange:"transform",position:"absolute",top:"0",left:"0",width:"100%",minHeight:t.height(),height:a.height,transformOrigin:"top center",transition:"transform 5ms linear",zIndex:"-2",backgroundSize:t.css("backgroundSize"),backgroundImage:'url("'+e+'")',backgroundPosition:t.css("backgroundPosition"),backgroundRepeat:t.css("backgroundRepeat")});var n={options:a,wrapper:t,object:o};h(window).on("scroll.buttery",function(){l(h(this),n)}),h(window).on("resize.buttery",function(){n=c(n),l(h(this),n)}),n=c(n),l(h(this),n)}(h(this))})})}}(jQuery);