/*!
 * Buttery v1.0.0
 * https://github.com/liquidlight/buttery
 *
 * Copyright 2017 Mike Street & Liquid Light
 */
!function(t){t.fn.buttery=function(a){var e={parallaxSelector:".parallaxInner",scale:1.5,height:"image",scrollFraction:2};a=t.extend(e,a);var r=function(t,a){var e=t.scrollTop();a.wrapper.offset().top>t.innerHeight()&&(e=t.scrollTop()+t.innerHeight()-a.wrapper.offset().top);var r=(e/=a.options.scrollFraction)>a.maxTransform?a.maxTransform:e<0?0:e;a.object.css("transform","translate3d(0, -"+r+"px, 0) scale("+a.options.scale+")")},n=function(e){var n=a;if(e.prepend('<div class="'+n.parallaxSelector.replace(".","")+'" />'),e.css({position:"relative",overflow:"hidden",zIndex:"1"}),e.is("[data-buttery-scale]")&&(n.scale=e.attr("[data-buttery-scale]")),e.is("[data-buttery-scrollFraction]")&&(n.scale=e.attr("[data-buttery-scrollFraction]")),e.is("[data-buttery-height]")&&(n.height=e.attr("[data-buttery-height]")),"image"==n.height){var o=e.css("backgroundImage").replace("url(","").replace(")","").replace(/['"]+/g,""),i=new Image;i.src=o;var s=i.width/i.height;n.height=e.outerWidth()/s}var c=e.find(n.parallaxSelector);c.css({transform:"translate3d(0, 0, 0) scale("+n.scale+")",willChange:"transform",position:"absolute",top:"0",left:"0",width:"100%",height:n.height,transformOrigin:"top center",transition:"transform 5ms linear",zIndex:"-2",backgroundSize:e.css("backgroundSize"),backgroundImage:e.css("backgroundImage"),backgroundPosition:e.css("backgroundPosition"),backgroundRepeat:e.css("backgroundRepeat")});var l={options:n,wrapper:e,object:c,maxTransform:c.innerHeight()*n.scale-e.innerHeight()};t(window).on("scroll.buttery",function(){r(t(this),l)}),t(window).on("resize.buttery",function(){r(t(this),l)}),t(window).on("load.buttery",function(){r(t(this),l)})};t(this).each(function(a,e){t(this).length&&n(t(this))})}}(jQuery);