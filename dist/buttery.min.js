/*!
 * Buttery v1.0.0
 * https://github.com/liquidlight/buttery
 *
 * Copyright 2017 Mike Street & Liquid Light
 */
!function(t){t.fn.buttery=function(a){var e={parallaxSelector:".parallaxInner",scale:1.5,height:"image",scrollFraction:2,image:"background"};a=t.extend(e,a);var r=function(t,a){var e=t.scrollTop();a.wrapper.offset().top>t.innerHeight()&&(e=t.scrollTop()+t.innerHeight()-a.wrapper.offset().top);var r=(e/=a.options.scrollFraction)>a.maxTransform?a.maxTransform:e<0?0:e;a.object.css("transform","translate3d(0, -"+r+"px, 0) scale("+a.options.scale+")")},i=function(e){var i=a,n="background"==a.image?e.css("backgroundImage"):e.find("img").attr("src");n=n.replace("url(","").replace(")","").replace(/['"]+/g,""),e.prepend('<div class="'+i.parallaxSelector.replace(".","")+'" />');var o="static"==e.css("position")?"relative":e.css("position");if(e.css({position:o,overflow:"hidden",zIndex:"1"}),e.is("[data-buttery-scale]")&&(i.scale=e.attr("[data-buttery-scale]")),e.is("[data-buttery-scrollFraction]")&&(i.scale=e.attr("[data-buttery-scrollFraction]")),e.is("[data-buttery-height]")&&(i.height=e.attr("[data-buttery-height]")),"image"==i.height){var s=new Image;s.src=n;var c=s.width/s.height;i.height=e.width()/c}"img"==a.image&&e.find("img").hide();var l=e.find(i.parallaxSelector);l.css({transform:"translate3d(0, 0, 0) scale("+i.scale+")",willChange:"transform",position:"absolute",top:"0",left:"0",width:"100%",height:i.height,transformOrigin:"top center",transition:"transform 5ms linear",zIndex:"-2",backgroundSize:e.css("backgroundSize"),backgroundImage:'url("'+n+'")',backgroundPosition:e.css("backgroundPosition"),backgroundRepeat:e.css("backgroundRepeat")});var g={options:i,wrapper:e,object:l,maxTransform:l.innerHeight()*i.scale-e.innerHeight()};t(window).on("scroll.buttery",function(){r(t(this),g)}),t(window).on("resize.buttery",function(){r(t(this),g)}),t(window).on("load.buttery",function(){r(t(this),g)})};t(this).each(function(){t(this).length&&i(t(this))})}}(jQuery);