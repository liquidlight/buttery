!function(a){a.fn.buttery=function(b){var c={parallaxSelector:".parallaxInner",scale:1.5,height:"image",scrollFraction:2};b=a.extend(c,b);var d=function(a,b){var c=a.scrollTop();b.wrapper.offset().top>a.innerHeight()&&(c=a.scrollTop()+a.innerHeight()-b.wrapper.offset().top),c/=b.options.scrollFraction;var d=c>b.maxTransform?b.maxTransform:c<0?0:c;b.object.css("transform","translate3d(0, -"+d+"px, 0) scale("+b.options.scale+")")},e=function(c){var e=b;if(c.prepend('<div class="'+e.parallaxSelector.replace(".","")+'" />'),c.css({position:"relative",overflow:"hidden",zIndex:"1"}),c.is("[data-buttery-scale]")&&(e.scale=c.attr("[data-buttery-scale]")),c.is("[data-buttery-scrollFraction]")&&(e.scale=c.attr("[data-buttery-scrollFraction]")),c.is("[data-buttery-height]")&&(e.height=c.attr("[data-buttery-height]")),"image"==e.height){var f=c.css("backgroundImage").replace("url(","").replace(")","").replace(/['"]+/g,""),g=new Image;g.src=f;var h=g.width/g.height;e.height=c.outerWidth()/h}var i=c.find(e.parallaxSelector);i.css({transform:"translate3d(0, 0, 0) scale("+e.scale+")",willChange:"transform",position:"absolute",top:"0",left:"0",width:"100%",height:e.height,transformOrigin:"top center",transition:"transform 5ms linear",zIndex:"-2",backgroundSize:c.css("backgroundSize"),backgroundImage:c.css("backgroundImage"),backgroundPosition:c.css("backgroundPosition"),backgroundRepeat:c.css("backgroundRepeat")});var j=i.innerHeight()*e.scale-c.innerHeight(),k={options:e,wrapper:c,object:i,maxTransform:j};a(window).on("scroll.buttery",function(){d(a(this),k)}),a(window).on("resize.buttery",function(){d(a(this),k)}),a(window).on("load.buttery",function(){d(a(this),k)})};a(this).each(function(b,c){a(this).length&&e(a(this))})}}(jQuery);